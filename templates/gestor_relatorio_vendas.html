<!DOCTYPE html>
<html lang="pt">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Relatório de Vendas - Gestor</title>

    <!-- Link para o Bootstrap -->
    <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.bundle.min.js"></script>
</head>
<body>
    <div class="container mt-5">
        <h2 class="text-center">Relatório de Vendas - Gestor</h2>

        <!-- Tabela de Vendas com Botão de Exclusão -->
        <table class="table table-striped table-bordered">
            <thead class="thead-dark">
                <tr>
                    <th>ID Venda</th>
                    <th>Produto</th>
                    <th>Vendedor</th>
                    <th>Quantidade</th>
                    <th>Total Venda</th>
                    <th>Status</th>
                    <th>Data da Venda</th>
                    <th>Ações</th>
                </tr>
            </thead>
            <tbody>
                {% for venda in vendas %}
                <tr>
                    <td>{{ venda.id }}</td>
                    <td>{{ venda.produto }}</td>
                    <td>{{ venda.vendedor }}</td>
                    <td>{{ venda.quantidade }}</td>
                    <td>R$ {{ venda.total_venda }}</td>
                    <td>{{ venda.status }}</td>
                    <td>{{ venda.data_venda }}</td>
                    <td>
                        <!-- Formulário de Exclusão -->
                        {% if venda.status in ['pendente', 'cancelada'] %}
                        <form action="{{ url_for('remover_venda', sale_id=venda.id) }}" method="POST" style="display:inline;">
                            <button type="submit" class="btn btn-danger">Excluir</button>
                        </form>
                        {% else %}
                        <button class="btn btn-secondary" disabled>Exclusão não permitida</button>
                        {% endif %}
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>

        <!-- Botão para Voltar -->
        <div class="text-center mt-4">
            <a href="{{ url_for('gestor_home') }}" class="btn btn-primary">Voltar ao Painel do Gestor</a>
        </div>
    </div>

    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.bundle.min.js"></script>
</body>
</html>